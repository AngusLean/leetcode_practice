import java.util.regex.Pattern

plugins {
    id 'java'
}

group 'com.doubleysoft.demo.alg'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile 'org.projectlombok:lombok:1.16.18'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}
ext {
    lombok = 'org.projectlombok:lombok:1.16.18'
}

task generateReadMeFile(){
    def readmetpl = file("README_TPL.md")
    def readme = file("README.md")
    readme.write("\n")
    readmetpl.eachLine {line ->
        readme.append(line+"\n")
    }
    fileTree("src/main/java").each{file ->
        println file.name
        file.eachLine {line ->
            if(line.contains("@see <a href=")){
                def url = line.find(Pattern.compile("\"(.*)\"")).replaceAll("\"","")
                def name = line.find(Pattern.compile("\\>(.*?)<")).replace("<","")
                println "题目URL：  "+url+",题目名称 "+name
                readme.append("|"+name+"|"+url+" |\n")
            }
        }
    }
}

jar.doLast {
    generateReadMeFile
}